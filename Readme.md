# Kill Zenkaku Alpha（全角英数キラー）

Kill Zenkaku Alphaは、Windowsで日本語入力時に意図せず全角英数モードになってしまう問題を解決するタスクトレイ常駐型アプリケーションです。アプリが動作している間、全角英数モードが検出されると自動的に半角英数モードに切り替えます。

## 背景と目的

日本語Windows環境でのタイピング中、意図せず全角英数モード（例：「ｈｅｌｌｏ」）になってしまい、後から修正する手間が発生することがあります。Kill Zenkaku Alphaはこの問題を解決するため、200ミリ秒ごとにIMEの状態をチェックし、全角英数モードを検出すると自動的に半角英数モードに変更します。

## 特徴

- Windows IMEの全角英数モードを自動検出
- 検出時に自動で半角英数モードに切り替え
- タスクトレイに常駐し、システムリソースを最小限に抑える設計
- ワンクリックで機能の有効/無効を切り替え可能

## インストール方法

1. [リリースページ](https://github.com/your-username/Kill-Zenkaku-Alpha/releases)から最新版の実行ファイルをダウンロード
2. ダウンロードしたファイルを任意のフォルダに保存
3. アプリケーションを起動すると、タスクトレイにアイコンが表示されます

### 自動起動の設定方法

Windows起動時に自動的にアプリケーションを起動するには：

1. `Win + R` キーを押して「ファイル名を指定して実行」を開く
2. `shell:startup` と入力してEnterキーを押す
3. スタートアップフォルダが開くので、そこにKill Zenkaku Alphaのショートカットを作成

## 使用方法

1. アプリケーションを実行すると、タスクトレイにアイコンが表示されます
2. タスクトレイアイコンをクリックするとメニューが表示されます：
   - **Stop Kill**: 機能を一時停止します（クリックすると「Start Kill」に変わります）
   - **Start Kill**: 一時停止した機能を再開します（クリックすると「Stop Kill」に変わります）
   - **Quit**: アプリケーションを終了します

アプリケーションが起動している間は、200ミリ秒ごとにアクティブなウィンドウのIME状態をチェックし、全角英数モードが検出された場合は自動的に半角英数モードに切り替えます。

## 動作の仕組み

このアプリケーションは以下のWindows APIを使用してIMEの状態を監視・制御しています：

- `user32.dll` と `imm32.dll` のWindowsシステムライブラリ
- `ImmGetDefaultIMEWnd` 関数でIMEウィンドウハンドルを取得
- `SendMessageA` 関数でIMEの変換モードを確認・変更

アプリは全角英数モード（コード値: 8）を検出すると、半角英数モードに自動変換します。

## 動作環境

- Windows 10/11
- 日本語IMEがインストールされていること
- Go言語ランタイム（ソースからビルドする場合）

## トラブルシューティング

- **アプリケーションが動作しない場合**: Windows 10/11で動作確認しています。古いバージョンのWindowsでは動作しない可能性があります。
- **IMEの状態が正しく検出されない場合**: 一部のサードパーティIMEでは動作しない可能性があります。
- **タスクトレイアイコンが表示されない場合**: タスクトレイの隠れたアイコンを確認してください。

## 開発者向け情報

### 必要な環境

- Go 1.19以上
- Windows開発環境

### ビルド方法

```
go build -ldflags -H=windowsgui
```

または、makefileを使用：

```
make build
```

## ライセンス

Kill Zenkaku AlphaはMITライセンスで提供されています。詳細については、[LICENSE](LICENSE.md)ファイルを参照してください。

---

© 2025 Kill Zenkaku Alpha
